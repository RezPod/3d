<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <div id="root"></div>
        <script src="3d.js"></script>
        <script src="solid.js"></script>

        <script>
            const cuboid = [
                [0, 0, 0], 
                [200, 0, 0], 
                [200, 100, 0], 
                [0, 100, 0], 
                // [0, 0, 0],
                [0, 0, 100], 
                [200, 0, 100], 
                [200, 100, 100], 
                [0, 100, 100], 
                // [0, 0, 100]
                // [50, 50, 50]
            ]

            const pyramid4 = [
                [0, 0, 0],
                [100, 0, 0],
                [100, 100, 0],
                [0, 100, 0],
                [50, 50, 100]
            ]

            const pyramid3 = [
                [0, 0, 0],
                [100, 0, 0],
                [0, 100, 0],
                [50, 50, 100]
            ]

            const pyramid5 = [
                [0, 0, 0],
                [100, 0, 0],
                [150, 75, 0],
                [75, 150, 0],
                [0, 100, 0],

                [50, 50, 100]
            ]

            const prism3 = [
                [0, 0, 0],
                [100, 0, 0],
                [0, 100, 0],

                [0, 0, 100],
                [100, 0, 100],
                [0, 100, 100],
            ]

            const prismPyramid = [
                [0, 0, 0], 
                [100, 0, 0], 
                [100, 100, 0], 
                [0, 100, 0], 
                // [0, 0, 0],
                [25, 25, 100], 
                [75, 25, 100], 
                [75, 75, 100], 
                [25, 75, 100], 
                // [0, 0, 100]
            ]

            const prismPyramidTilted = [
                [0, 0, 0], 
                [100, 0, 0], 
                [100, 100, 0], 
                [0, 100, 0], 
                // [0, 0, 0],
                [25, 25, 100], 
                [125, 25, 100], 
                [125, 125, 100], 
                [25, 125, 100], 
                // [0, 0, 100]
            ]

            const prism5 = [
                [0, 0, 0], 
                [100, 0, 0], 
                [125, 75, 0], 
                [75, 125, 0], 
                [0, 100, 0],
                
                [0, 0, 100], 
                [100, 0, 100], 
                [125, 75, 100], 
                [75, 125, 100], 
                [0, 100, 100]
            ]

            const vertecies = [
                [0, 0, 0], 
                [100, 0, 0], 
                [100, 100, 0],
                [0, 100, 0],

                [100, 100, 100],
                [100, 0, 100],
                [0, 0, 100], 
                [0, 100, 100],

                // [50, 100, 20],
                // [50, 0, 20],

                // [50, 50, 150],
                // [0, 50, 100]
            ]
            
            const w = new Canvas3D();
            w.drawAxis(400);

            let solid = new Solid(vertecies);
            const convexHull = solid.convexHull();
            console.log(convexHull);

            for(let f of convexHull.faces){
                w.drawPolygon(
                    f.map(i=>solid[i]),
                    "gold", 
                    1, 
                    0
                )
            }


            function moveShape(shapeId, solid, velocity, acceleration=Vector.zero()){

                w.removeShape(shapeId);

                solid.move(velocity.scale(1/60));

                for(let f of convexHull.faces){
                    w.drawPolygon(
                        f.map(i=>solid[i]),
                        "gold", 
                        1, 
                        shapeId
                    )
                }
                
                velocity = velocity.add(acceleration.scale(1/60));

                setTimeout(()=>moveShape(shapeId, solid, velocity), 17);
            }

            let velocity = (new Vector(0, 0, 0)).scale(1);
            let acceleration = (new Vector(0, 0, -98)).scale(10);

            moveShape(0, solid, velocity, acceleration)
        </script>
    </body>
</html>